{% extends 'base.html.twig' %}

{% block title %}Lister les contrats{% endblock %}

{% block body %}


<!-- Page Heading -->
<h1 class="h3 mb-2 text-gray-800">Tous les contrats</h1>

<!-- DataTales Example -->
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary"><a href="/23PHONK/public/contrat/ajouter">Ajouter un contrat</a></h6>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <td>Date de début</td>
                        <td>Date de fin</td>
                        <td>Attestation d'assurance</td>
                        <td>Etat détaillé au début</td>
                        <td>Etat détaillé à la fin</td>
                        <td>Nom de l'élève</td>
                        <td>Prenom de l'élève</td>
                        <td>Nom de l'instrument</td>
                        <td>Responsable de l'élève</td>
                        <td>Action</td>
                    </tr>
                </thead>
                  <tfoot>
                        {% for c in pContrats %}
                            <tr>
                            <td><a href="{{ path('consulterContrat', { 'id': c.id }) }}">{{ c.datedebut|date('d/m/Y') }}</a></td>
                            <td>{{ c.datefin|date('d/m/Y') }}</a></td>
                            <td>{{ c.attestationassurance }}</td>
                            <td>{{ c.etatdetailledebut}}</td>
                            <td>{{ c.etatdetaillefin}}</td>
                            <td>{{ c.eleve.nom}}</td>
                            <td>{{ c.eleve.prenom}}</td>
                            <td>{{ c.instrument.name}}</td>
                                <td>
                                    {% for responsable in c.eleve.responsables %}
                                        {{ responsable.nom|upper }} {{ responsable.prenom }}
                                    {% endfor %}
                                </td>

                                <td>
                                    <a href="/23PHONK/public/contrat/modifier/{{ c.id }}">✏️</a>
                                    <a href="/23PHONK/public/contrat/consulter/{{ c.id }}">👁️</a>
                                    <a href="#">🗑️</a>
                                </td>
                            </tr>


                        {% else %}
                                    <tr>
                                        <td>Aucun contrat n'a été trouvé.</td>
                                    </tr>
                        {% endfor %}

</table>
            </tbody>
        </div>
    </div>
</div>


{% endblock %}
